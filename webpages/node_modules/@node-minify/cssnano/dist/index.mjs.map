{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/*!\n * node-minify\n * Copyright(c) 2011-2024 Rodolphe Stoclin\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nimport type { MinifierOptions } from \"@node-minify/types\";\nimport { utils } from \"@node-minify/utils\";\nimport cssnano from \"cssnano\";\nimport postcss from \"postcss\";\n\n/**\n * Run cssnano.\n * @param settings Cssnano options\n * @param content Content to minify\n * @param callback Callback\n * @param index Index of current file in array\n * @returns Minified content\n */\nconst minifyCssnano = async ({\n    settings,\n    content,\n    callback,\n    index,\n}: MinifierOptions) => {\n    let contentMinified = { css: \"\" };\n    try {\n        contentMinified = await postcss([cssnano]).process(content || \"\", {\n            from: undefined,\n        });\n    } catch (e) {\n        if (callback) {\n            return callback(e);\n        }\n    }\n    if (settings && !settings.content && settings.output) {\n        settings.output &&\n            utils.writeFile({\n                file: settings.output,\n                content: contentMinified.css,\n                index,\n            });\n    }\n    if (callback) {\n        return callback(null, contentMinified.css);\n    }\n    return contentMinified.css;\n};\n\n/**\n * Expose `minifyCssnano()`.\n */\nminifyCssnano.default = minifyCssnano;\nexport = minifyCssnano;\n"],"mappings":";;;;;;AAUA,SAAS,aAAa;AACtB,OAAO,aAAa;AACpB,OAAO,aAAa;AAZpB;AAAA;AAsBA,QAAM,gBAAgB,OAAO;AAAA,MACzB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ,MAAuB;AACnB,UAAI,kBAAkB,EAAE,KAAK,GAAG;AAChC,UAAI;AACA,0BAAkB,MAAM,QAAQ,CAAC,OAAO,CAAC,EAAE,QAAQ,WAAW,IAAI;AAAA,UAC9D,MAAM;AAAA,QACV,CAAC;AAAA,MACL,SAAS,GAAG;AACR,YAAI,UAAU;AACV,iBAAO,SAAS,CAAC;AAAA,QACrB;AAAA,MACJ;AACA,UAAI,YAAY,CAAC,SAAS,WAAW,SAAS,QAAQ;AAClD,iBAAS,UACL,MAAM,UAAU;AAAA,UACZ,MAAM,SAAS;AAAA,UACf,SAAS,gBAAgB;AAAA,UACzB;AAAA,QACJ,CAAC;AAAA,MACT;AACA,UAAI,UAAU;AACV,eAAO,SAAS,MAAM,gBAAgB,GAAG;AAAA,MAC7C;AACA,aAAO,gBAAgB;AAAA,IAC3B;AAKA,kBAAc,UAAU;AACxB,qBAAS;AAAA;AAAA;","names":[]}